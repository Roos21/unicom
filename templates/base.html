{% load auth_extras %}
{% load static %}
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Cybercafé ERP
      {% endblock %}
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    {% block extra_head %}

    {% endblock %}
  </head>

  <body class="bg-gray-50 flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-48 bg-blue-800 text-white flex-shrink-0">
        {% include 'nav/navbar.html' %}
    </aside>

    <!-- Main content -->
    <div class="flex-1 flex flex-col">
      <!-- Header / Topbar -->
      <header class="bg-blue-100 text-black shadow px-6 py-4 flex justify-between items-center">
        <h1 class="text-2xl font-semibold">
          {% block page_title %}
            Tableau de bord
          {% endblock %}
        </h1>

        <div class="flex items-center space-x-4">
          {% if user.is_authenticated %}
            <span class="font-medium">{{ user.username }} ({{ user.role }})</span>
            <a href="{% url 'accounts:logout' %}" class="px-3 py-1 bg-red-500 hover:bg-red-600 rounded">Déconnexion</a>
          {% endif %}
        </div>
      </header>

      <!-- Main area -->
      <main class="flex-1 p-6 overflow-auto">
        {% if messages %}
          {% for message in messages %}
            <div class="mb-4 px-4 py-2 rounded {{ message.tags|default:'bg-blue-200' }}">{{ message }}</div>
          {% endfor %}
        {% endif %}
        {% block content %}

        {% endblock %}
      </main>

      <!-- Footer -->
      <footer class="bg-blue-900 text-white text-center py-4 text-sm">&copy; {{ now.year }} Univers Créatifs — ERP Unicom</footer>
    </div>
  </body>
</html>
